function initMap(){function o(o,e){var n=document.getElementById("mode").value;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(i){pos={lat:i.coords.latitude,lng:i.coords.longitude},o.route({origin:{lat:pos.lat,lng:pos.lng},destination:{lat:t.lat,lng:t.lng},travelMode:google.maps.TravelMode[n]},function(o,n){"OK"==n?e.setDirections(o):window.alert("Peticion de indicaciones fallida, debido a: "+n)}),l.setPosition(pos),l.setContent("Usted está aquí"),a.setCenter(pos)},function(){handleLocationError(!0,l,a.getCenter())}):handleLocationError(!1,l,a.getCenter())}var e=new google.maps.DirectionsRenderer,n=new google.maps.DirectionsService,t={lat:19.342473,lng:-99.138634},a=new google.maps.Map(document.getElementById("map"),{zoom:17,center:t}),i=new google.maps.InfoWindow({content:"Terminal Central del Sur"}),r=new google.maps.Marker({position:t,map:a,icon:"https://raw.githubusercontent.com/CodyHouse/custom-google-map/master/img/cd-icon-location.png"});i.open(a,r),e.setMap(a),document.getElementById("mode").addEventListener("change",function(){"SELECT"==document.getElementById("mode").value?initMap():o(n,e)});var l=new google.maps.InfoWindow({map:a})}function handleLocationError(o,e,n){e.setPosition(n),e.setContent(o?"Error: El servicio de Geolocalizacion ha sido fallida.":"Error: Su navegador no soporta Geolocalizacion.")}document.ready(function(){initMap()});